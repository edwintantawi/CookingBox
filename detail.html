<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0">
  <meta name="keywords"
        content="cookingBox, cooking, food recipes, cook, recipes, recipe, cooking box, box cooking, kitchen, food recipe, how to cook, food, foods, foods recipe, food recipes, recipe food, how to cook">
  <meta name="description"
        content="Learn To Cook From Home Like a Chef, Make the family kitchen like a restaurant kitchen more productive at home by cooking for the family or starting a culinary business. With our recipe recipes!. CookingBox is a website service that provides delicious recipes from several countries. We also support people to enjoy cooking in their homes because it is more economical and healthier. You can also open a culinary business. We are here for those of you who want to cook but are confused about what to cook, start cooking with us for your beloved family.">
  <meta http-equiv="X-UA-Compatible" content="IE=7">
  <link rel="apple-touch-icon" sizes="57x57" href="/src/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/src/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/src/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/src/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/src/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/src/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/src/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/src/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/src/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/src/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/src/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/src/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/src/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/src/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <meta property="og:title" content="CookingBox">
  <meta property="og:description" content="CookingBox Foods Recipes, service that provides delicious recipes from several countries. We also support people to enjoy cooking in their homes because it is more economical and healthier"> 
  <meta property="og:url" content="https://cookingbox.xyz/detail.html">
  <meta property="og:image" content="/src/assets/icons/maskable_icon_x512.png"> 
  <meta property="og:type" content="article"> 
  <!-- ------------------------------ bootstrap ------------------------------ -->
  <!-- <link rel="stylesheet" href="/src/css/bootstrap.css"> -->
  <link rel="stylesheet" href="dist/bootstrap.css">
  <!-- --------------------------------- css --------------------------------- -->
  <link rel="stylesheet" href="/src/css/styles.min.css">
  <!-- ----------------------------- fontawesome ----------------------------- -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
  <!-- ---------------------------- google fonts ----------------------------- -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Kaushan+Script&family=Montserrat:ital,wght@0,300;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
  <!-- -------------------------------- title -------------------------------- -->
  <title>CookingBox</title>
</head>
<body>


  <!-- START APP SHELL: Navbar -->
  <nav class="navbar">
    <div class="container">
      <!-- brand -->
      <a href="/" class="navbar__brand">
        <img src="/src/assets/logo/logo-full.svg" alt="CookingBox">
      </a>
      <!-- navigation -->
      <div class="navbar__navigation d-none d-md-block">
        <a href="/index.html" class="navlink"><i class="fas fa-angle-left"></i> Back</a>
      </div>
    </div>
  </nav>
  <div class="navbar__mobile__navigation_detail d-block d-md-none" >
    <div class="wrap">
      <a href="/index.html" class="navlink active"><i class="fas fa-level-up-alt"></i>Back</a>
    </div>
  </div>
  <!-- END APP SHELL: Navbar -->

<main class="detail" id="root">
  <div class="loader">
    <div class="spinner-border text-warning" role="status">
      <span class="visually-hidden">Loading Foods...</span>
    </div>
    <span class="text">getting food recipes...</span>
  </div>
 <!-- Rendering -->
</main>


  <script>
  if ("serviceWorker" in navigator) {
        window.addEventListener("load", function() {
            navigator.serviceWorker
                .register("/service-worker.js")
                .then(function() {
                console.log("Pendaftaran ServiceWorker berhasil");
            })
                .catch(function() {
                console.log("Pendaftaran ServiceWorker gagal");
            });
        });
    } else {
        console.log("ServiceWorker belum didukung browser ini.");
    }

    document.addEventListener('DOMContentLoaded', () => {
      const URL_PARAMS = new URLSearchParams(window.location.search);
      const MEAL_ID = URL_PARAMS.get("id");
      const BASE_URL = 'https://www.themealdb.com/api/json/v1/1';
      const placeHolder = document.querySelector('.detail');

      getDetailFood();

      async function getDetailFood(){
        try{  
          const response = await fetch(`${BASE_URL}/lookup.php?i=${MEAL_ID}`);
          const responseJson = await response.json();
          
          if( responseJson.error ){
            console.error(responseJson.message)
          }else {
            // ? handle null food tags
            let tags = '';
            const dataMeal = responseJson.meals[0];
            if ( dataMeal.strTags === null ){
              tags = ["Foods / Drink"]
            } else {
              tags = dataMeal.strTags.split(',');
            }

            // ? change title
            console.log(dataMeal)
            document.title = `CookingBox - ${dataMeal.strMeal}`;
            const ogTitle = document.querySelector('meta[property="og:title"]');
            const ogUrl = document.querySelector('meta[property="og:url"]');
            const ogImage = document.querySelector('meta[property="og:image"]');
            ogTitle.setAttribute('content',`CookingBox - ${dataMeal.strMeal}`);
            ogUrl.setAttribute('content',`https://cookingbox.xyz/detail.html?id=${dataMeal.idMeal}`);
            ogImage.setAttribute('content',`${dataMeal.strMealThumb}`);
            
            // ? Loop ingredients
            const ingredients = [];
            for( let i = 1; i <= 20; i++ ){
              if( dataMeal[`strIngredient${i}`] !== null && dataMeal[`strIngredient${i}`] !== '' ){
                ingredients.push([dataMeal[`strIngredient${i}`], dataMeal[`strMeasure${i}`]]);
              }
            }
            // ? resplace \n to <br>
            const instructions = dataMeal.strInstructions.replace(/\n/g, "<br>");

            placeHolder.innerHTML = `
            <div class="detail__image" style="background-image:url(${dataMeal.strMealThumb});">
              <div class="label">
                ${dataMeal.strCategory}
              </div>
              <a class="play-video" title="Play Cooking Tutorial" href="${dataMeal.strYoutube}" target="_blank" rel="noopener noreferrer">
                <i class="far fa-play-circle"></i>  
              </a>
            </div>
            <div class="detail__text">
              <div class="wrap">
                <div class="title">
                <h2>
                  ${dataMeal.strMeal}
                </h2>
                <div class="bookmark">
                  <!-- bookmark logo -->
                  <!-- <i class="fas fa-bookmark"></i> -->
                  <i class="far fa-bookmark"></i>
                </div>
              </div>
              <div class="food-badge">
                ${
                  tags.map(tag => {
                    return `<span>${tag}</span>`;
                  }).join('')
                }
              </div>
              <div class="ingredient">
                <h3>Ingredient</h3>
                <ul>
                  ${
                    ingredients.map(ingredient => {
                      return `<li><span>${ingredient[0]}</span> <span>${ingredient[1]}</span></li>`
                    }).join('')
                  }                
                </ul>
              </div>
              <div class="instructions">
                <h3>Instructions</h3>
                <p>
                ${instructions}
                </p>
              </div>  
              </div>
            </div>
            `;
          }
      
        }catch(error){
          console.log(error)
        }
      }
    })
  </script>
  <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-600d135a6ce822e9"></script>
  <!-- END : script -->
</body>
</html>